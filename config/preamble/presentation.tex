%====================================
% Environment & debugging
% \linenumbers % Show line numbers
%====================================
\DTMlangsetup[en-GB]{ord=raise,monthyearsep={,\space}} % date format


%====================================
% Structure & Layout
%====================================
% Better page layout for A4 paper, see memoir manual.
\settrimmedsize{297mm}{210mm}{*}
\setlength{\trimtop}{0pt} 
\setlength{\trimedge}{\stockwidth} 
\addtolength{\trimedge}{-\paperwidth} 
\settypeblocksize{634pt}{448.13pt}{*} 
\setulmargins{4cm}{*}{*} 
\setlrmargins{*}{*}{1.5} 
\setmarginnotes{17pt}{51pt}{\onelineskip} 
\setheadfoot{2\onelineskip}{2\onelineskip} 
\setheaderspaces{*}{2\onelineskip}{*} 
\checkandfixthelayout

% Page layout
\makepagestyle{myvf} 
\makeoddfoot{myvf}{}{\thepage}{} 
\makeevenfoot{myvf}{}{\thepage}{} 
\makeheadrule{myvf}{\textwidth}{\normalrulethickness} 
\makeevenhead{myvf}{\small\textsc{\leftmark}}{}{} 
\makeoddhead{myvf}{}{}{\small\textsc{\rightmark}}
\pagestyle{myvf}



%====================================
% Font & Spacing
%====================================
\OnehalfSpacing 
\frenchspacing

% epigraph
\epigraphfontsize{\small\itshape}
\setlength\epigraphwidth{8cm}
\setlength\epigraphrule{0pt}


% Reduce widows (the last line of a paragraph at the start of a page) and orphans (the first line of paragraph at the end of a page)
\widowpenalty=1000
\clubpenalty=1000


%====================================
% Chapters
%====================================
\makeatletter 
\newlength\dlf@normtxtw % do we need this???
\setlength\dlf@normtxtw{\textwidth} % do we need this???

% Chapter boxed number
\newsavebox{\feline@chapter} 
\newcommand\feline@chapter@marker[1][4cm]{%
	\sbox\feline@chapter{% 
		\resizebox{!}{#1}{\fboxsep=1pt%
			\colorbox{gray}{\color{white}\thechapter}% 
		}}%
		\rotatebox{90}{% Verticle Chaper
			\resizebox{%
				\heightof{\usebox{\feline@chapter}}+\depthof{\usebox{\feline@chapter}}}% 
			{!}{\scshape\so\@chapapp}}\quad%
		\raisebox{\depthof{\usebox{\feline@chapter}}}{\usebox{\feline@chapter}} % boxed number
} 

\newcommand\feline@chm[1][4cm]{%
	\sbox\feline@chapter{\feline@chapter@marker[#1]}% 
	\makebox[0pt][c]{% aka \rlap
		\makebox[1cm][r]{\usebox\feline@chapter}%
	}}

\makechapterstyle{daleifmodif}{
	\renewcommand\chapnamefont{\normalfont\Large\scshape\raggedleft\so} 
	\renewcommand\chaptitlefont{\normalfont\Large\bfseries\scshape} 
	\renewcommand\chapternamenum{} \renewcommand\printchaptername{} 
	\renewcommand\printchapternum{\null\hfill\feline@chm[2.5cm]\par} % box height
	\renewcommand\afterchapternum{\par\vskip\midchapskip} 
	\renewcommand\printchaptertitle[1]{\color{gray}\chaptitlefont\raggedleft ##1\par}
} 
\makeatother 
% end modifying package internals

\chapterstyle{daleifmodif}


%====================================
% Sections
%====================================
% Sets numbering division level
\setsecnumdepth{subsection} 
\maxsecnumdepth{subsubsection}


%====================================
% Tables & Figures
%====================================
% Figure/table as subfloat
\newsubfloat{figure}
\newsubfloat{table}





%====================================
% Flowcharts
%====================================
% Define a custom color using a hex value
%\definecolor{customGreen}{HTML}{006400}

\tikzstyle{start} = [ellipse,  minimum width=2.5cm, minimum height=1.3cm, line width=1pt, text centered, draw=green!40!black!40, fill=green!40!black!30, font=\tiny]

\tikzstyle{stop} = [ellipse,  minimum width=2.5cm, minimum height=1.3cm, line width=1pt, text centered, draw=red!40, fill=red!25, font=\tiny]

\tikzstyle{process} = [rectangle, minimum width=3.25cm, minimum height=1.3cm, line width=1pt, text centered, text width=3.25cm, draw=blue!30, fill=blue!15, align=center, font=\tiny]

% \tikzstyle{plainText} = [rectangle, minimum width=3cm, minimum height=1.3cm, line width=1pt, text centered, font=\tiny]

\tikzstyle{io} = [trapezium, trapezium left angle=70, trapezium right angle=110, minimum width=2.25cm, minimum height=1.3cm, text centered, text width=1.3cm, draw=orange!50, fill=orange!30, font=\tiny]


\tikzstyle{decision} = [diamond, aspect=1.75, minimum width=3cm, minimum height=0.5cm, line width=1pt, text centered, text width=2.0cm, draw=yellow!60, fill=yellow!40, font=\tiny]

\tikzstyle{arrow} = [->,>=stealth, font=\tiny, line width=1pt]


    